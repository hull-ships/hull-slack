{
  "name": "Slack",
  "description": "Notify a Slack Channel whenever a User enters or leaves a Segment",
  "picture": "picture.png",
  "version": "0.0.7",
  "tags": [
    "incoming",
    "outgoing",
    "oneColumn",
    "smart-notifier"
  ],
  "private_settings": [
    {
      "name": "token",
      "title": "Token",
      "type": "string",
      "format": "hidden"
    },
    {
      "name": "team_id",
      "title": "team_id",
      "type": "string",
      "format": "hidden"
    },
    {
      "name": "user_id",
      "title": "user_id",
      "type": "string",
      "format": "hidden"
    },
    {
      "name": "incoming_webhook",
      "title": "Incoming Webhook",
      "type": "object",
      "format": "hidden",
      "properties": {
        "url": {
          "title": "url",
          "type": "string"
        },
        "channel": {
          "title": "channel",
          "type": "string"
        },
        "channel_id": {
          "title": "channel_id",
          "type": "string"
        },
        "configuration_url": {
          "title": "configuration_url",
          "type": "string"
        }
      }
    },
    {
      "name": "bot",
      "title": "Bot",
      "type": "object",
      "format": "hidden",
      "properties": {
        "bot_user_id": {
          "title": "bot_user_id",
          "type": "string"
        },
        "bot_access_token": {
          "title": "bot_access_token",
          "type": "string"
        }
      }
    },
    {
      "name": "whitelist",
      "title": "Add Attributes to Send in Notification",
      "type": "array",
      "default": [],
      "format": "trait"
    },
    {
      "name": "notify_events",
      "title": "Add Notification Triggers",
      "type": "array",
      "format": "table",
      "default": [
        {
          "event": "",
          "channel": ""
        }
      ],
      "items": {
        "type": "object",
        "required": [
          "channel",
          "event"
        ],
        "properties": {
          "event": {
            "title": "Event Name",
            "description": "Event which to trigger a notification",
            "type": "string",
            "format": "event",
            "options": {
              "standard": {
                "ENTERED_USER_SEGMENT": "Entered User Segment",
                "LEFT_USER_SEGMENT": "Left User Segment"
              }
            }
          },
          "synchronized_segment": {
            "title": "Applicable User Segments",
            "description": "User segments in which user events must occur in or on",
            "type": "string",
            "format": "segment",
            "options": {
              "standard": {
                "ALL": "All Users"
              }
            },
            "default": "ALL"
          },
          "channel": {
            "title": "@user or #channel",
            "description": "Channel or user to notify on trigger",
            "type": "string",
            "format": "string"
          }
        }
      }
    },
    {
      "name": "actions",
      "title": "Add User Update Action Buttons",
      "default": [
        {
          "label": "",
          "property": "",
          "value": ""
        }
      ],
      "type": "array",
      "format": "table",
      "items": {
        "type": "object",
        "properties": {
          "label": {
            "title": "Button Label",
            "type": "string"
          },
          "property": {
            "title": "Property name",
            "type": "string",
            "format": "trait"
          },
          "value": {
            "title": "Property Value",
            "type": "string"
          }
        }
      }
    },
    {
      "name": "account_whitelist",
      "title": "Add Account Attributes to Send in Notification",
      "type": "array",
      "default": [],
      "format": "trait"
    },
    {
      "name": "notify_account_segments",
      "title": "Add Account Notification Triggers",
      "type": "array",
      "format": "table",
      "default": [
        {
          "event": "",
          "channel": ""
        }
      ],
      "items": {
        "type": "object",
        "required": [
          "channel",
          "event"
        ],
        "properties": {
          "event": {
            "title": "Event Name",
            "description": "Event which to trigger a notification",
            "type": "string",
            "format": "event",
            "options": {
              "standard": {
                "ENTERED_USER_SEGMENT": "Entered Account Segment",
                "LEFT_USER_SEGMENT": "Left Account Segment"
              }
            }
          },
          "synchronized_segment": {
            "title": "Applicable Account Segments",
            "description": "Account segments in which account events must occur in or on",
            "type": "string",
            "format": "accountSegment",
            "options": {
              "standard": {
                "ALL": "All Accounts"
              }
            },
            "default": "ALL"
          },
          "channel": {
            "title": "@user or #channel",
            "description": "Channel or user to notify on trigger",
            "type": "string",
            "format": "string"
          }
        }
      }
    }
  ],
  "settings_sections": [
    {
      "title": "User Slack Notification Triggers",
      "description": "Choose the scenarios where you would like to receive Slack notifications. \"Entered/Left User Segment\" events apply to the selected segment, whereas for other event types, the user must be IN the segment for the notification to trigger",
      "properties": [
        "private_settings.notify_events"
      ]
    },
    {
      "title": "User Attribute White List",
      "description": "Choose the attributes that you want to send in the slack notification.  If no attributes are chosen, all are sent by default.  The segments and attribute changes are sent in all cases",
      "properties": [
        "private_settings.whitelist"
      ]
    },
    {
      "title": "User Action Buttons",
      "description": "Along with the notification data, you may create action buttons which update user attributes in a single click.  For example, if you want to mark a lead in a notification as \"Contacted\", you could add a button for your team to click once the action has been performed",
      "properties": [
        "private_settings.actions"
      ]
    },
    {
      "title": "Account Slack Notification Triggers",
      "description": "Choose the scenarios where you would like to receive Slack notifications. \"Entered/Left Account Segment\" events apply to the selected segment, whereas for other event types, the user must be IN the segment for the notification to trigger",
      "properties": [
        "private_settings.notify_account_segments"
      ]
    },
    {
      "title": "Account Attribute White List",
      "description": "Choose the attributes that you want to send in the slack notification.  If no attributes are chosen, all are sent by default.  The segments and attribute changes are sent in all cases",
      "properties": [
        "private_settings.account_whitelist"
      ]
    }
  ],
  "deployment_settings": [],
  "resources": [],
  "readme": "readme.md",
  "admin": "/auth",
  "tabs": [
    {
      "title": "Credentials",
      "setup": true,
      "url": "/auth",
      "size": "small",
      "editable": false
    }
  ],
  "ui": false,
  "subscriptions": [
    {
      "url": "/smart-notify"
    }
  ],
  "schedules": [
    {
      "url": "/status",
      "type": "interval",
      "value": "5"
    }
  ]
}
